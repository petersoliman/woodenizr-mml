{% extends 'fe/base.html.twig' %}
{% set seo = seoPage.seo %}
{% use '@PNSeo/FrontEnd/seo.html.twig' %}
{% import 'fe/macros.html.twig' as macros %}


{% block criticalCSS %}
    {% include "product/frontEnd/category/_critical_css.css.twig" %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ macros.assetCSS(asset('pages-assets/categories/categories.styles.css')) }}
{% endblock %}

{% block content %}
    {% set pageTitle = seoPage.seo.title %}

    {% set coverPhoto = null %}
    {% if parentCategory is not empty and parentCategory.post.imageByType(constant("\\App\\MediaBundle\\Entity\\Image::TYPE_COVER_PHOTO")) %}
        {% set coverPhoto = asset(parentCategory.post.imageByType(constant("\\App\\MediaBundle\\Entity\\Image::TYPE_COVER_PHOTO")).assetPath) %}
    {% endif %}

    {% set pageDescription = null %}
    {% if parentCategory is not empty %}
        {% set pageTitle = parentCategory.title %}
        {% set pageDescription = parentCategory.post.content.brief %}
    {% endif %}

    {% include "fe/_pages_header.html.twig" with {"pageTitle": pageTitle, description: pageDescription, "image" : coverPhoto, "marginBottomZero": true } %}

    <div class="l-lazy-section ui-lazy-section loading"
         data-l-lazy-section="categories"
         data-l-lazy-section-type="simple"
         data-l-lazy-section-url="{{ path(app.request.attributes.get('_route'),app.request.attributes.get('_route_params')|merge({'content':true})) }}"
    ></div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ macros.assetCSS(asset('pages-assets/categories/categories.lazy.styles.css'), true) }}

    {{ macros.assetJS(asset('pages-assets/categories/categories.js')) }}
    {{ macros.assetJS(asset('pages-assets/categories/categories.lazy.js'), true) }}
{% endblock %}
