{% extends 'fe/base.html.twig' %}
{% block title %}{{ "my_orders_txt"|trans }}{% endblock %}
{% import 'fe/macros.html.twig' as macros %}

{% block stylesheets %}
    {{ parent() }}

    {{ macros.assetCSS(asset('pages-assets/profile-my-orders/profile-my-orders.styles.css')) }}
{% endblock %}

{% block content %}
    {% include "fe/_pages_header.html.twig" with {"pageTitle": "my_orders_txt"|trans, "marginBottomZero": true } %}

    <div class="wrapper-profile">
        <div class="l-container">
            <div class="l-flex-row">
                <div class="l-flex-col-xl-3 wrapper-profile-sidebar" data-profile-sidebar="true">
                    {% include "user/frontEnd/profile/_sidemenu.html.twig" %}
                </div>
                <div class="l-flex-col-xl-9 wrapper-profile-card" data-profile-card="true">
                    <div class="card-header">
                        <button class="back-btn" data-profile-card-btn="true">
                            <svg width="10" height="17" viewBox="0 0 10 17" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M0.261816 8.79401L7.52177 16.0538C7.68968 16.2219 7.91383 16.3145 8.15283 16.3145C8.39184 16.3145 8.61599 16.2219 8.7839 16.0538L9.31855 15.5193C9.66645 15.171 9.66645 14.6049 9.31855 14.2572L3.22219 8.16082L9.32531 2.0577C9.49323 1.88965 9.58594 1.66563 9.58594 1.42676C9.58594 1.18762 9.49323 0.963606 9.32531 0.795426L8.79067 0.261047C8.62262 0.0930003 8.39861 0.000423328 8.1596 0.000423307C7.92059 0.000423286 7.69644 0.0930002 7.52853 0.261047L0.261816 7.5275C0.0935038 7.69607 0.00105931 7.92115 0.00158953 8.16042C0.00105927 8.40062 0.0935037 8.62557 0.261816 8.79401Z"
                                      fill="#686868"/>
                            </svg>
                        </button>
                        <div>
                            <h2 class="title">{{ "my_orders_txt"|trans }}</h2>
                            <p class="subtitle">{{ "my_orders_description_txt"|trans }}</p>
                        </div>
                    </div>


                    {% if orders is empty %}
                        <div class="wrapper-empty-orders-placeholder">
                            <svg width="120" height="120" viewBox="0 0 120 120" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M90 106V18C90 13.6 86.4 10 82 10H10C5.6 10 2 13.6 2 18V106C2 110.4 5.6 114 10 114H82C84.1217 114 86.1566 113.157 87.6569 111.657C89.1572 110.157 90 108.122 90 106Z"
                                      fill="#AD6D40"/>
                                <path d="M80 18H12C10.8954 18 10 18.8954 10 20V104C10 105.105 10.8954 106 12 106H80C81.1046 106 82 105.105 82 104V20C82 18.8954 81.1046 18 80 18Z"
                                      fill="#F8F8FF"/>
                                <path d="M62 10V16C62 18.2 60.2 20 58 20H34C31.8 20 30 18.2 30 16V10C30 8.9 30.9 8 32 8H38.26C39.14 4.54 42.28 2 46 2C49.72 2 52.86 4.54 53.74 8H60C61.1 8 62 8.9 62 10Z"
                                      fill="#CBCBF4"/>
                                <path d="M118 59.9199V114C118 116.2 116.2 118 114 118H54C51.8 118 50 116.2 50 114V59.9199H118Z"
                                      fill="#EA9453"/>
                                <path d="M117.39 58.474L105.522 46.606C105.33 46.414 105.103 46.2617 104.852 46.1577C104.602 46.0537 104.333 46.0001 104.062 46H63.94C63.6687 45.9999 63.4001 46.0534 63.1496 46.1574C62.899 46.2614 62.6715 46.4138 62.48 46.606L50.612 58.474C49.31 59.776 50.232 62 52.072 62H115.932C117.772 62 118.692 59.776 117.39 58.474Z"
                                      fill="#FCB36B"/>
                                <path d="M94 62V76C94 76.5304 93.7893 77.0391 93.4142 77.4142C93.0391 77.7893 92.5304 78 92 78H76C75.4696 78 74.9609 77.7893 74.5858 77.4142C74.2107 77.0391 74 76.5304 74 76V62L76 60H92L94 62Z"
                                      fill="#723535"/>
                                <path d="M70 100H60C58.8954 100 58 100.895 58 102V108C58 109.105 58.8954 110 60 110H70C71.1046 110 72 109.105 72 108V102C72 100.895 71.1046 100 70 100Z"
                                      fill="white"/>
                                <path d="M94 62L88 46H80L74 62H94Z" fill="#914747"/>
                                <path d="M97.414 98.5864C97.2284 98.4005 97.008 98.253 96.7654 98.1524C96.5227 98.0518 96.2626 98 96 98C95.7373 98 95.4772 98.0518 95.2346 98.1524C94.992 98.253 94.7715 98.4005 94.586 98.5864L92.586 100.586C92.3054 100.866 92.1141 101.222 92.0364 101.61C91.9587 101.999 91.9981 102.401 92.1496 102.767C92.3011 103.133 92.5579 103.445 92.8873 103.665C93.2168 103.885 93.604 104.001 94 104V110C94 110.531 94.2107 111.04 94.5858 111.415C94.9608 111.79 95.4695 112 96 112C96.5304 112 97.0391 111.79 97.4142 111.415C97.7893 111.04 98 110.531 98 110V104C98.3959 104.001 98.7832 103.885 99.1126 103.665C99.442 103.445 99.6988 103.133 99.8503 102.767C100.002 102.401 100.041 101.999 99.9635 101.61C99.8859 101.222 99.6946 100.866 99.414 100.586L97.414 98.5864ZM111.414 100.586L109.414 98.5864C109.228 98.4005 109.008 98.253 108.765 98.1524C108.523 98.0518 108.263 98 108 98C107.737 98 107.477 98.0518 107.235 98.1524C106.992 98.253 106.772 98.4005 106.586 98.5864L104.586 100.586C104.305 100.866 104.114 101.222 104.036 101.61C103.959 101.999 103.998 102.401 104.15 102.767C104.301 103.133 104.558 103.445 104.887 103.665C105.217 103.885 105.604 104.001 106 104V110C106 110.531 106.211 111.04 106.586 111.415C106.961 111.79 107.47 112 108 112C108.53 112 109.039 111.79 109.414 111.415C109.789 111.04 110 110.531 110 110V104C110.396 104.001 110.783 103.885 111.113 103.665C111.442 103.445 111.699 103.133 111.85 102.767C112.002 102.401 112.041 101.999 111.964 101.61C111.886 101.222 111.695 100.866 111.414 100.586Z"
                                      fill="#20295E"/>
                                <path d="M28.0002 46.0002C27.7375 46.0005 27.4774 45.9488 27.2347 45.8483C26.9921 45.7477 26.7717 45.6002 26.5862 45.4142L22.5862 41.4142C22.2112 41.0392 22.0005 40.5306 22.0005 40.0002C22.0005 39.4699 22.2112 38.9612 22.5862 38.5862C22.9612 38.2112 23.4698 38.0005 24.0002 38.0005C24.5305 38.0005 25.0392 38.2112 25.4142 38.5862L27.6902 40.8622L34.3362 30.8922C34.482 30.6737 34.6693 30.486 34.8876 30.3399C35.1059 30.1938 35.3509 30.0921 35.6084 30.0407C35.866 29.9892 36.1312 29.989 36.3889 30.0401C36.6466 30.0911 36.8917 30.1924 37.1102 30.3382C37.3287 30.484 37.5164 30.6713 37.6625 30.8896C37.8086 31.1079 37.9103 31.3529 37.9617 31.6105C38.0131 31.8681 38.0133 32.1333 37.9623 32.3909C37.9113 32.6486 37.81 32.8937 37.6642 33.1122L29.6642 45.1122C29.4815 45.386 29.234 45.6105 28.9438 45.7658C28.6535 45.921 28.3294 46.0003 28.0002 46.0002ZM28.0002 70.0002C27.7375 70.0005 27.4774 69.9488 27.2347 69.8483C26.9921 69.7477 26.7717 69.6002 26.5862 69.4142L22.5862 65.4142C22.4005 65.2285 22.2532 65.0081 22.1527 64.7655C22.0522 64.5228 22.0005 64.2628 22.0005 64.0002C22.0005 63.7376 22.0522 63.4776 22.1527 63.235C22.2532 62.9923 22.4005 62.7719 22.5862 62.5862C22.7719 62.4005 22.9923 62.2532 23.2349 62.1527C23.4776 62.0522 23.7376 62.0005 24.0002 62.0005C24.2628 62.0005 24.5228 62.0522 24.7654 62.1527C25.0081 62.2532 25.2285 62.4005 25.4142 62.5862L27.6902 64.8622L34.3362 54.8922C34.6306 54.4509 35.0882 54.1446 35.6084 54.0407C36.1287 53.9368 36.6689 54.0438 37.1102 54.3382C37.5515 54.6326 37.8578 55.0902 37.9617 55.6105C38.0656 56.1307 37.9586 56.6709 37.6642 57.1122L29.6642 69.1122C29.4815 69.386 29.234 69.6105 28.9438 69.7658C28.6535 69.921 28.3294 70.0003 28.0002 70.0002ZM28.0002 94.0002C27.7375 94.0005 27.4774 93.9488 27.2347 93.8483C26.9921 93.7477 26.7717 93.6002 26.5862 93.4142L22.5862 89.4142C22.4005 89.2285 22.2532 89.0081 22.1527 88.7655C22.0522 88.5228 22.0005 88.2628 22.0005 88.0002C22.0005 87.7376 22.0522 87.4776 22.1527 87.235C22.2532 86.9923 22.4005 86.7719 22.5862 86.5862C22.7719 86.4005 22.9923 86.2532 23.2349 86.1527C23.4776 86.0522 23.7376 86.0005 24.0002 86.0005C24.2628 86.0005 24.5228 86.0522 24.7654 86.1527C25.0081 86.2532 25.2285 86.4005 25.4142 86.5862L27.6902 88.8622L34.3362 78.8922C34.482 78.6737 34.6693 78.486 34.8876 78.3399C35.1059 78.1938 35.3509 78.0921 35.6084 78.0407C35.866 77.9893 36.1312 77.989 36.3889 78.0401C36.6466 78.0911 36.8917 78.1924 37.1102 78.3382C37.3287 78.484 37.5164 78.6714 37.6625 78.8897C37.8086 79.1079 37.9103 79.3529 37.9617 79.6105C38.0131 79.8681 38.0133 80.1333 37.9623 80.3909C37.9113 80.6486 37.81 80.8937 37.6642 81.1122L29.6642 93.1122C29.4815 93.386 29.234 93.6105 28.9438 93.7658C28.6535 93.9211 28.3294 94.0003 28.0002 94.0002Z"
                                      fill="#79BBC3"/>
                            </svg>
                            <p>{{ "no_orders_msg"|trans }}</p>
                            <a href="{{ path('fe_home') }}" class="btn btn-primary btn-md btn-rounded">
                                <span class="text">{{ "continue_shopping_txt"|trans }}</span>
                            </a>
                        </div>
                    {% else %}


                        <div class="wrapper-orders">
                            {% for order in orders %}
                                <div class="order">
                                    <div class="l-flex-row">
                                        <div class="l-flex-col-8">
                                            <div class="order-number">
                                                {{ "order_number_txt"|trans }} : <strong>{{ "#"~order.id }}</strong>
                                            </div>
                                        </div>
                                        <div class="l-flex-col-4">
                                            <div class="order-action">
                                                <a href="{{ path('fe_profile_my_order_show', {"uuid": order.uuid}) }}">
                                                    <span>{{ "view_details_txt"|trans }}</span>
                                                    <i>
                                                        <svg width="10" height="17" viewBox="0 0 10 17" fill="none"
                                                             xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M9.32412 7.52044L2.06417 0.260624C1.89626 0.0925781 1.67211 0 1.4331 0C1.1941 0 0.969948 0.0925781 0.802034 0.260624L0.267389 0.795137C-0.0805083 1.14343 -0.0805083 1.70951 0.267389 2.05728L6.36375 8.15363L0.260624 14.2568C0.0927107 14.4248 0 14.6488 0 14.8877C0 15.1268 0.0927107 15.3508 0.260624 15.519L0.795269 16.0534C0.963316 16.2215 1.18733 16.314 1.42634 16.314C1.66534 16.314 1.88949 16.2215 2.05741 16.0534L9.32412 8.78696C9.49243 8.61838 9.58488 8.3933 9.58435 8.15403C9.58488 7.91383 9.49243 7.68889 9.32412 7.52044Z"
                                                                  fill="#79BBC3"/>
                                                        </svg>
                                                    </i>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="l-flex-col-12 l-flex-col-xl-8">
                                            <div class="time">
                                                {{ "placed_on_txt"|trans }} :
                                                <strong>{{ order.created|date('d M Y') }}</strong>
                                            </div>
                                            <div class="total">
                                                {{ "grand_total_txt"|trans }} :
                                                <strong>{{ order.totalPrice|moneyFormat }}</strong>
                                            </div>
                                        </div>
                                        <div class="l-flex-col-12 l-flex-col-xl-4">
                                            {% include "user/frontEnd/profile/_order_status.html.twig" %}
                                        </div>
                                        <div class="l-flex-col-12">
                                            <div class="separator"></div>
                                        </div>
                                        <div class="l-flex-col-12">
                                            <h6 class="items-title">{{ "order_items_items"|trans }}
                                                <small>{{ order.itemNo }} {{ "items_txt"|trans }}</small></h6>
                                            <div class="items">
                                                {% for orderHasProductPrice in order.orderHasProductPrices %}
                                                    {% set title = orderHasProductPrice.productPrice.product.title %}
                                                    {% if orderHasProductPrice.qty > 1 %}
                                                        {% set title =  title ~ " (" ~orderHasProductPrice.qty ~ " " ~ "items_txt"|trans ~ ")" %}
                                                    {% endif %}
                                                    <a href="{{ path('fe_product_show', {'slug':orderHasProductPrice.productPrice.product.seo.slug}) }}"
                                                       class="item" data-tooltip="true"
                                                       data-tippy-content="{{ title }}"
                                                       title="{{ title }}">
                                                        {% if orderHasProductPrice.productPrice.product.post.mainImage != null %}
                                                            <img class="lazyload"
                                                                 src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                                                                 data-src="{{ asset(orderHasProductPrice.productPrice.product.post.mainImage.assetPath) }}"
                                                                 alt="{{ orderHasProductPrice.productPrice.product.title }}">
                                                        {% else %}
                                                            <img class="lazyload"
                                                                 src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                                                                 data-src="{{ asset('assets/img/product-img-placeholder.webp') }}"
                                                                 alt="{{ orderHasProductPrice.productPrice.product.title }}">
                                                        {% endif %}
                                                    </a>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                        {% include "fe/_pagination.html.twig" %}
                    {% endif %}


                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ macros.assetCSS(asset('pages-assets/profile-my-orders/profile-my-orders.lazy.styles.css'), true) }}

    {{ macros.assetJS(asset('pages-assets/profile-my-orders/profile-my-orders.js')) }}
    {{ macros.assetJS(asset('pages-assets/profile-my-orders/profile-my-orders.lazy.js'), true) }}
{% endblock %}