{% extends 'fe/base.html.twig' %}
{% block title %}{{ "shopping_cart_txt"|trans }}{% endblock %}
{% import 'fe/macros.html.twig' as macros %}

{% block stylesheets %}
    {{ parent() }}

    {% if is_granted('ROLE_USER') %}
        {{ macros.assetCSS(asset('pages-assets/cart-order-logged-page-1/cart-order-logged-page-1.styles.css')) }}
    {% else %}
        {{ macros.assetCSS(asset('pages-assets/cart-order-guest-page-1/cart-order-guest-page-1.styles.css')) }}
    {% endif %}
{% endblock %}

{% block content %}
    {% include "fe/_pages_header.html.twig" with {"pageTitle": "shopping_cart_txt"|trans, "marginBottomZero": true } %}
    <div class="u-bg-light">

        <div class="l-container">

            {% include "eCommerce/frontEnd/cart/_progress_bar.html.twig" with {step: 2} %}

            <form action="{{ path('fe_cart_payment_method') }}" method="post" data-form-validate="true">
                <div class="l-flex-row">
                    <div class="l-flex-col-xl-8">
                        {% if app.user != null %}
                            {% include "eCommerce/frontEnd/cart/_shipping_address_logged_in_user.html.twig" %}
                        {% else %}
                            {% include "eCommerce/frontEnd/cart/_shipping_address_guest_user.html.twig" %}
                        {% endif %}
                    </div>
                    <div class="l-flex-col-xl-4">
                        <div class="wrapper-cart-summary">
                            <div class="cart-summary">
                                <h6 class="title">{{ "order_summary_txt"|trans }}</h6>
                                {% include "eCommerce/frontEnd/cart/_side_menu_summery.html.twig" %}
                            </div>
                        </div>
                        <div class="wrapper-cart-cta">
                            <div class="wrapper-cart-cta-xs-only">
                                {{ "total_txt"|trans }} ( <span
                                        data-cart-items-count="true">0</span> {{ "items_txt"|trans }} ) : <strong><span
                                            data-cart-summary-grand-total-value="true">0</span> <span
                                            data-cart-summary-grand-total-currency="true"></span></strong>
                            </div>
                            <div class="wrapper-cart-error" data-cart-out-of-stock-error="true" hidden>
                                {{ "remove_out_of_stock_or_add_wishlist_txt"|trans }}
                            </div>
                            <div class="wrapper-cart-error" data-cart-max-stock-error="true" hidden>
                                {{ "remove_out_of_stock_or_change_qty_txt"|trans }}
                            </div>
                            <button type="submit"
                                    class="btn btn-icon btn-primary btn-block btn-xxl wrapper-cart-submit-btn" disabled
                                    data-cart-submit-btn="true">
                                <span class="text">{{ "proceed_to_checkout_txt"|trans }}</span>
                                <span class="icon">
                                <svg width="26" height="22" viewBox="0 0 26 22" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M25.1253 9.7522L16.2226 0.579388C15.9684 0.31755 15.6297 0.173828 15.2685 0.173828C14.907 0.173828 14.5685 0.317757 14.3143 0.579388L13.506 1.4124C13.2521 1.67382 13.1122 2.02301 13.1122 2.39532C13.1122 2.76743 13.2521 3.12839 13.506 3.38981L18.6998 8.75275H2.199C1.45503 8.75275 0.867188 9.35283 0.867188 10.1196V11.2972C0.867188 12.0639 1.45503 12.7245 2.199 12.7245H18.7587L13.5062 18.1174C13.2523 18.3792 13.1124 18.7189 13.1124 19.0912C13.1124 19.4631 13.2523 19.8078 13.5062 20.0694L14.3145 20.8997C14.5687 21.1616 14.9072 21.3043 15.2687 21.3043C15.6299 21.3043 15.9686 21.1597 16.2228 20.8979L25.1255 11.7253C25.3803 11.4626 25.5204 11.112 25.5194 10.7393C25.5202 10.3653 25.3803 10.0144 25.1253 9.7522Z"
                                          fill="white"/>
                                </svg>
                            </span>
                            </button>
                            <div class="wrapper-cart-cta-xs-only">
                                <a href="{{ path('fe_cart_show') }}" class="btn btn-icon-2 btn-block btn-xxl btn-plain">
                                <span class="icon">
                                    <svg width="10" height="16" viewBox="0 0 10 16" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
                                        <path d="M7.47074 15.1133L9.22656 13.3508L3.52325 7.61328L9.22656 1.87578L7.47074 0.113281L-0.000850975 7.61328L7.47074 15.1133Z"
                                              fill="#686868"/>
                                    </svg>
                                </span>
                                    <span class="text">{{ "return_to_cart_txt"|trans }}</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </form>

        </div>

    </div>

{% endblock %}

{% block modals %}
    {% if is_granted('ROLE_USER') %}
        {% include "eCommerce/frontEnd/cart/_shipping_address_logged_in_user_modals.html.twig" %}
    {% endif %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/ecommerce/gtm.enhancedEcommerce.checkout.js') }}"></script>
    <script>
        window.addEventListener('DOMContentLoaded', function (event) {
            enhancedEcommerceTrackCheckoutOption(2, "Shipping Address");
        });
    </script>
    {% if is_granted('ROLE_USER') %}
        {{ macros.assetCSS(asset('pages-assets/cart-order-logged-page-1/cart-order-logged-page-1.lazy.styles.css'), true) }}

        {{ macros.assetJS(asset('pages-assets/cart-order-logged-page-1/cart-order-logged-page-1.js')) }}
        {{ macros.assetJS(asset('pages-assets/cart-order-logged-page-1/cart-order-logged-page-1.lazy.js'), true) }}
    {% else %}
        {{ macros.assetCSS(asset('pages-assets/cart-order-guest-page-1/cart-order-guest-page-1.lazy.styles.css'), true) }}

        {{ macros.assetJS(asset('pages-assets/cart-order-guest-page-1/cart-order-guest-page-1.js')) }}
        {{ macros.assetJS(asset('pages-assets/cart-order-guest-page-1/cart-order-guest-page-1.lazy.js'), true) }}
    {% endif %}
{% endblock %}